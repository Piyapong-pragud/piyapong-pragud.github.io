<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Piyapong ‚Äì Vocab Driller (‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏õ‡πÄ‡∏´‡∏≠‡∏∞)</title>
  <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%23F7C948'/><text x='50' y='60' font-size='60' text-anchor='middle' fill='%232E2E2E' font-family='Arial'>P</text></svg>">
  <style>
    :root{
      --yellow:#F7C948; /* mellow yellow */
      --yellow-2:#FFD54F; /* accent */
      --gray-9:#111317;
      --gray-8:#1c1f24;
      --gray-7:#2E2E2E;
      --gray-5:#5a5f66;
      --gray-3:#C7CBD1;
      --gray-1:#F5F6F8;
      --radius:18px;
      --shadow:0 10px 30px rgba(247,201,72,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans",sans-serif;
      color:#222; background:linear-gradient(180deg,var(--gray-1),#fff);
    }
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter:saturate(180%) blur(10px);
      background:linear-gradient(90deg,var(--yellow),var(--yellow-2));
      color:var(--gray-9);
      box-shadow:var(--shadow);
    }
    .nav{
      display:flex; align-items:center; gap:12px; padding:12px 16px; max-width:1100px; margin:0 auto;
    }
    .nav a{color:inherit; text-decoration:none; font-weight:600}
    .badge{padding:6px 10px; border-radius:999px; background:rgba(0,0,0,.08); font-size:12px}

    main{max-width:1100px; margin:22px auto; padding:0 16px 70px}

    .board{display:grid; grid-template-columns:1.2fr .8fr; gap:16px}
    @media (max-width: 900px){ .board{grid-template-columns:1fr} }

    .card{
      background:#fff; border-radius:var(--radius); box-shadow:var(--shadow);
      border:1px solid #eee;
    }
    .card .hd{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px dashed #eee}
    .card .hd h2{margin:0; font-size:18px}
    .card .bd{padding:18px}

    /* Display panel */
    .display{
      min-height:280px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px;
      text-align:center; padding:28px; background:radial-gradient(60% 60% at 50% 0%, #fff 0%, #fff7d6 100%);
      border:1px dashed rgba(0,0,0,.06); border-radius:calc(var(--radius) - 4px);
    }
    .word{font-size:clamp(32px, 7vw, 64px); font-weight:800; letter-spacing:.5px; color:var(--gray-9)}
    .trans{font-size:clamp(18px,3.2vw,28px); color:var(--gray-7); opacity:.9}
    .phon{font-size:clamp(14px,2.2vw,18px); color:var(--gray-5)}

    /* Controls */
    .controls{display:flex; flex-wrap:wrap; align-items:center; gap:10px; justify-content:center; padding-top:10px}
    .btn{
      appearance:none; border:none; background:var(--gray-9); color:#fff; padding:10px 14px; border-radius:14px; font-weight:700;
      display:inline-flex; align-items:center; gap:8px; cursor:pointer; transition:.2s transform,.2s opacity; box-shadow:0 6px 14px rgba(0,0,0,.12)
    }
    .btn:hover{transform:translateY(-1px)}
    .btn.secondary{background:var(--yellow); color:var(--gray-9)}
    .btn.ghost{background:#fff; color:#222; border:1px solid #e9e9e9}
    .btn:disabled{opacity:.4; cursor:not-allowed}

    .sliders{display:flex; flex-wrap:wrap; gap:16px; justify-content:center; padding:14px}
    .sliders label{display:flex; align-items:center; gap:10px; font-size:14px; color:#444}
    input[type="range"]{width:200px}

    .utils{display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between; color:#555}
    .utils .left{display:flex; gap:10px; align-items:center}
    .pill{background:#fff8cf; border:1px solid #ffe27a; padding:6px 10px; border-radius:999px; font-weight:600; color:#6a5400}

    /* Progress */
    .progress{position:relative; height:10px; background:#eee; border-radius:999px; overflow:hidden}
    .bar{position:absolute; inset:0; width:0%; background:linear-gradient(90deg,var(--yellow),var(--yellow-2));}

    /* Loader / Importer */
    .importer .bd{display:grid; gap:10px}
    .importer .grid{display:grid; gap:10px; grid-template-columns:1fr 1fr}
    @media (max-width: 900px){ .importer .grid{grid-template-columns:1fr} }
    textarea{width:100%; min-height:180px; resize:vertical; font-family:ui-monospace,SFMono-Regular,Menlo,monospace; padding:10px; border-radius:12px; border:1px solid #e6e6e6; background:#fff}
    .hint{font-size:12px; color:#666}

    footer{position:fixed; left:0; right:0; bottom:0; background:#fff; border-top:1px solid #eee; padding:10px 16px; display:flex; gap:12px; justify-content:center; align-items:center}
    footer .kbd{font-family:ui-monospace,Menlo,monospace; background:#222; color:#fff; padding:4px 8px; border-radius:8px}
/* ============================
   ‚ö° VOCAB FULLSCREEN MODE FIX
   ============================ */

/* ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏π‡∏•‡∏™‡∏Å‡∏£‡∏µ‡∏ô */
.fullscreen-mode header,
.fullscreen-mode footer,
.fullscreen-mode .importer,
.fullscreen-mode .controls,
.fullscreen-mode .sliders,
.fullscreen-mode .utils,
.fullscreen-mode .hd {
    display: none !important;
}

/* ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå */
.fullscreen-mode .board {
    grid-template-columns: 1fr !important;
    width: 100vw !important;
    height: 100vh !important;
    padding: 0 !important;
    margin: 0 !important;
}

.fullscreen-mode .card {
    height: 100vh !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    border: none !important;
}

.fullscreen-mode .display {
    height: 100vh !important;
    padding: 0 !important;
    margin: 0 !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    flex-direction: column !important;
}

/* ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡∏ö‡∏¥‡πä‡∏Å‡πÑ‡∏ã‡∏™‡πå */
.fullscreen-mode .word {
    font-size: 6rem !important;
}

.fullscreen-mode .trans {
    font-size: 3rem !important;
}

.fullscreen-mode .phon {
    font-size: 2rem !important;
    opacity: .8;
}

  </style>
</head>
<body>
  <header>
    <div class="nav">
      <a href="#" onclick="history.back();return false">‚üµ Back</a>
      <div class="badge">Piyapong Portfolio ‡∏ù‡∏∂‡∏Å‡πÑ‡∏õ‡πÄ‡∏´‡∏≠‡∏∞</div>
      <div style="margin-left:auto;font-weight:700">Vocab Driller</div>
    </div>
  </header>

  <main>
    <div class="board">
      <!-- Left: Display / Controls -->
      <section class="card">
        <div class="hd">
          <h2>‡∏ù‡∏∂‡∏Å‡∏à‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡∏•‡∏∞‡∏Ñ‡∏≥</h2>
          <div class="pill"><span id="counter">0 / 0</span></div>
        </div>
        <div class="bd">
          <div class="display" id="display">
            <div class="word" id="word">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
            <div class="phon" id="phonetic"></div>
            <div class="trans" id="trans">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏Å‡πà‡∏≠‡∏ô</div>
          </div>

          <div class="controls" style="margin-top:10px">
            <button class="btn" id="prevBtn">‚üµ ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
            <button class="btn secondary" id="playBtn">‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>
            <button class="btn" id="nextBtn">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ü∂</button>
            <button class="btn ghost" id="toggleTransBtn">üëÅÔ∏è ‡∏ã‡πà‡∏≠‡∏ô/‡πÇ‡∏ä‡∏ß‡πå‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•</button>
            <button class="btn ghost" id="shuffleBtn">üîÄ ‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö</button>
            <button class="btn ghost" id="resetBtn">‚ôªÔ∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
            <button id="fullscreenBtn" class="fs-btn">üì∫ ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠</button>
          </div>

          <div class="sliders">
            <label>‚è±Ô∏è ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Ñ‡∏≥)
              <input type="range" min="0.6" max="6" step="0.2" id="speedRange" />
              <span id="speedVal">2.0</span>
            </label>
            <label>üî§ ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
              <input type="range" min="28" max="80" step="1" id="fontRange" />
              <span id="fontVal">64px</span>
            </label>
          </div>

          <div class="utils">
            <div class="left">
              <span>‡πÇ‡∏´‡∏°‡∏î:</span>
              <select id="mode">
                <option value="en-th">‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‚Üí ‡πÅ‡∏õ‡∏•‡πÑ‡∏ó‡∏¢</option>
                <option value="th-en">‡πÑ‡∏ó‡∏¢ ‚Üí ‡πÅ‡∏õ‡∏•‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</option>
              </select>
            </div>
            <div style="min-width:160px;flex:1">
              <div class="progress"><div class="bar" id="bar"></div></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Right: Import / Manage List -->
      <section class="card importer">
        <div class="hd">
          <h2>‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏®‡∏±‡∏û‡∏ó‡πå (CSV/‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏•‡∏∞‡∏Ñ‡∏≥)</h2>
        </div>
        <div class="bd">
          <div class="grid">
            <div>
              <label class="hint">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö 1: <b>‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©,‡πÑ‡∏ó‡∏¢[,‡∏™‡∏±‡∏ó‡∏≠‡∏±‡∏Å‡∏©‡∏£]</b> [‡∏Ñ‡∏≠‡∏°‡∏°‡πà‡∏≤/‡πÅ‡∏ó‡πá‡∏ö ‡∏Å‡πá‡πÑ‡∏î‡πâ] ‚Äì ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</label>
              <textarea id="pasteArea" placeholder="example, ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á, /Àà…õ…°z…ëÀêmp…ôl/\nability, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ\n..."></textarea>
              <div style="display:flex; gap:8px; margin-top:8px; align-items:center">
                <button class="btn secondary" id="loadBtn">‚¨ÜÔ∏è ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
                <button class="btn ghost" id="sampleBtn">üß™ ‡πÄ‡∏ï‡∏¥‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 20 ‡∏Ñ‡∏≥</button>
              </div>
            </div>
            <div>
              <label class="hint">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö 2: ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå <b>.csv / .txt</b> (UTF‚Äë8)</label>
              <input type="file" id="fileInput" accept=".csv,.txt" />
              <div class="hint" style="margin-top:8px">* ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: <code>english,thai,phonetic</code></div>
              <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap">
                <button class="btn" id="saveLocalBtn">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (localStorage)</button>
                <button class="btn ghost" id="clearLocalBtn">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
              </div>
            </div>
          </div>
          <div class="hint" style="margin-top:8px">Tip: ‡∏Å‡∏î <span class="kbd">Space</span> = ‡πÄ‡∏•‡πà‡∏ô/‡∏´‡∏¢‡∏∏‡∏î ‚Ä¢ <span class="kbd">‚Üê/‚Üí</span> = ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤/‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Ä¢ <span class="kbd">S</span> = ‡∏™‡∏∏‡πà‡∏° ‚Ä¢ <span class="kbd">H</span> = ‡∏ã‡πà‡∏≠‡∏ô/‡πÇ‡∏ä‡∏ß‡πå‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•</div>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <span>‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î: <span class="kbd">Space</span> ‡πÄ‡∏•‡πà‡∏ô/‡∏´‡∏¢‡∏∏‡∏î ¬∑ <span class="kbd">‚Üê</span>/<span class="kbd">‚Üí</span> ‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤/‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á ¬∑ <span class="kbd">S</span> ‡∏™‡∏∏‡πà‡∏° ¬∑ <span class="kbd">H</span> ‡∏ã‡πà‡∏≠‡∏ô‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•</span>
  </footer>

  <script>
    // --- State ---
    const state = {
      list: [], // {en, th, phon}
      idx: 0,
      playing: false,
      timer: null,
      showTrans: true,
      speed: parseFloat(localStorage.getItem('vd_speed') || '2.0'),
      font: parseInt(localStorage.getItem('vd_font') || '64', 10),
      mode: localStorage.getItem('vd_mode') || 'en-th',
    };

    // --- Elements ---
    const el = {
      word: document.getElementById('word'),
      trans: document.getElementById('trans'),
      phon: document.getElementById('phonetic'),
      counter: document.getElementById('counter'),
      bar: document.getElementById('bar'),
      playBtn: document.getElementById('playBtn'),
      nextBtn: document.getElementById('nextBtn'),
      prevBtn: document.getElementById('prevBtn'),
      toggleTransBtn: document.getElementById('toggleTransBtn'),
      shuffleBtn: document.getElementById('shuffleBtn'),
      resetBtn: document.getElementById('resetBtn'),
      speedRange: document.getElementById('speedRange'),
      speedVal: document.getElementById('speedVal'),
      fontRange: document.getElementById('fontRange'),
      fontVal: document.getElementById('fontVal'),
      mode: document.getElementById('mode'),
      pasteArea: document.getElementById('pasteArea'),
      loadBtn: document.getElementById('loadBtn'),
      fileInput: document.getElementById('fileInput'),
      sampleBtn: document.getElementById('sampleBtn'),
      saveLocalBtn: document.getElementById('saveLocalBtn'),
      clearLocalBtn: document.getElementById('clearLocalBtn'),
      display: document.getElementById('display'),
    };

    // --- Helpers ---
    function parseLines(text){
      const rows = text.split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
      const out=[];
      for(const r of rows){
        const parts = r.split(/[\t,]+/).map(s=>s.trim());
        if(parts.length>=2){
          out.push({en: parts[0], th: parts[1], phon: parts[2]||''});
        }
      }
      return out;
    }

    function updateDisplay(){
      const total = state.list.length;
      if(total===0){
        el.word.textContent = '‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏Å‡πà‡∏≠‡∏ô';
        el.trans.textContent = 'Paste ‡∏´‡∏£‡∏∑‡∏≠ Upload ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤';
        el.phon.textContent = '';
        el.counter.textContent = '0 / 0';
        el.bar.style.width = '0%';
        return;
      }
      if(state.idx<0) state.idx=0; if(state.idx>=total) state.idx=total-1;
      const item = state.list[state.idx];
      const isEnTh = state.mode === 'en-th';
      const head = isEnTh ? item.en : item.th;
      const sub = isEnTh ? item.th : item.en;
      el.word.textContent = head;
      el.trans.textContent = state.showTrans ? sub : '‚Ä¢‚Ä¢‚Ä¢';
      el.phon.textContent = item.phon || '';
      el.counter.textContent = (state.idx+1) + ' / ' + total;
      el.bar.style.width = ((state.idx+1)/total*100).toFixed(1)+'%';
      el.display.style.setProperty('--zoom', state.font);
      el.word.style.fontSize = state.font + 'px';
      el.trans.style.display = state.showTrans ? 'block' : 'block'; // keep space
    }

    function next(){
      if(state.list.length===0) return;
      state.idx = (state.idx + 1) % state.list.length;
      localStorage.setItem('vd_idx', String(state.idx));
      updateDisplay();
    }
    function prev(){
      if(state.list.length===0) return;
      state.idx = (state.idx - 1 + state.list.length) % state.list.length;
      localStorage.setItem('vd_idx', String(state.idx));
      updateDisplay();
    }

    function play(){
      if(state.playing || state.list.length===0) return;
      state.playing = true; el.playBtn.textContent = '‚è∏ ‡∏´‡∏¢‡∏∏‡∏î';
      state.timer = setInterval(next, state.speed*1000);
    }
    function pause(){
      state.playing = false; el.playBtn.textContent = '‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥';
      if(state.timer) clearInterval(state.timer); state.timer=null;
    }
    function togglePlay(){ state.playing ? pause() : play(); }

    function shuffle(){
      // Fisher-Yates
      for(let i=state.list.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [state.list[i],state.list[j]]=[state.list[j],state.list[i]];
      }
      state.idx=0; updateDisplay();
    }

    function loadFromText(){
      const txt = el.pasteArea.value.trim();
      const arr = parseLines(txt);
      if(arr.length){
        state.list = arr; state.idx = 0; updateDisplay();
      } else { alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤'); }
    }

    function loadFromFile(file){
      if(!file) return;
      const reader = new FileReader();
      reader.onload = e=>{
        el.pasteArea.value = e.target.result;
        loadFromText();
      };
      reader.readAsText(file,'utf-8');
    }

    function saveLocal(){
      if(state.list.length===0){ alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å'); return; }
      localStorage.setItem('vd_list', JSON.stringify(state.list));
      localStorage.setItem('vd_idx', String(state.idx));
      alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß');
    }
    function clearLocal(){
      localStorage.removeItem('vd_list');
      localStorage.removeItem('vd_idx');
      alert('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß');
    }

    function reset(){ state.idx=0; updateDisplay(); }

    // --- Events ---
    el.playBtn.addEventListener('click', togglePlay);
    el.nextBtn.addEventListener('click', ()=>{ pause(); next(); });
    el.prevBtn.addEventListener('click', ()=>{ pause(); prev(); });
    el.toggleTransBtn.addEventListener('click', ()=>{ state.showTrans=!state.showTrans; localStorage.setItem('vd_show', state.showTrans?'1':'0'); updateDisplay(); });
    el.shuffleBtn.addEventListener('click', ()=>{ pause(); shuffle(); });
    el.resetBtn.addEventListener('click', ()=>{ pause(); reset(); });

    el.speedRange.addEventListener('input', e=>{
      state.speed = parseFloat(e.target.value); el.speedVal.textContent = state.speed.toFixed(1);
      localStorage.setItem('vd_speed', String(state.speed));
      if(state.playing){ pause(); play(); }
    });
    el.fontRange.addEventListener('input', e=>{
      state.font = parseInt(e.target.value,10); el.fontVal.textContent = state.font + 'px';
      localStorage.setItem('vd_font', String(state.font));
      updateDisplay();
    });
    el.mode.addEventListener('change', e=>{ state.mode = e.target.value; localStorage.setItem('vd_mode', state.mode); updateDisplay(); });

    el.loadBtn.addEventListener('click', ()=>{ pause(); loadFromText(); saveLocal(); });
    el.fileInput.addEventListener('change', e=>{ pause(); loadFromFile(e.target.files[0]); saveLocal(); e.target.value=''; });
    el.sampleBtn.addEventListener('click', ()=>{
      el.pasteArea.value = `ability, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ, /…ôÀàb…™l…ôti/\naccurate, ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥\nacquire, ‡πÑ‡∏î‡πâ‡∏°‡∏≤ / ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ\nadapt, ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß\nadvance, ‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤\nadvice, ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥\naffect, ‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠\nafford, ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏î‡πâ\nagreement, ‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á\nallow, ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï\nalternative, ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å\namount, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô\nannual, ‡∏£‡∏≤‡∏¢‡∏õ‡∏µ\nappeal, ‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î / ‡∏≠‡∏∏‡∏ó‡∏ò‡∏£‡∏ì‡πå\nappropriate, ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°\narrange, ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ / ‡∏à‡∏±‡∏î‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°\nassess, ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô\nassist, ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠\nassume, ‡∏™‡∏°‡∏°‡∏ï‡∏¥\nattempt, ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°`;
      loadFromText(); saveLocal();
    });
    el.saveLocalBtn.addEventListener('click', saveLocal);
    el.clearLocalBtn.addEventListener('click', clearLocal);

    // Keyboard shortcuts
    window.addEventListener('keydown', e=>{
      if(['INPUT','TEXTAREA'].includes(e.target.tagName)) return; // ignore typing areas
      if(e.code==='Space'){ e.preventDefault(); togglePlay(); }
      if(e.key==='ArrowRight'){ e.preventDefault(); pause(); next(); }
      if(e.key==='ArrowLeft'){ e.preventDefault(); pause(); prev(); }
      if(e.key.toLowerCase()==='s'){ pause(); shuffle(); }
      if(e.key.toLowerCase()==='h'){ state.showTrans=!state.showTrans; localStorage.setItem('vd_show', state.showTrans?'1':'0'); updateDisplay(); }
    });

    // --- Init from localStorage ---
    (function init(){
      el.speedRange.value = state.speed; el.speedVal.textContent = state.speed.toFixed(1);
      el.fontRange.value = state.font; el.fontVal.textContent = state.font + 'px';
      el.mode.value = state.mode;
      state.showTrans = (localStorage.getItem('vd_show')||'1')==='1';
      try{
        const saved = localStorage.getItem('vd_list');
        if(saved){ state.list = JSON.parse(saved); }
        const savedIdx = parseInt(localStorage.getItem('vd_idx')||'0',10);
        if(!isNaN(savedIdx)) state.idx = savedIdx;
      }catch(err){ console.warn(err); }
      updateDisplay();
    })();
    const btn = document.getElementById("fullscreenBtn");

btn.addEventListener("click", () => {
    let elem = document.documentElement;

    if (!document.fullscreenElement) {
        elem.requestFullscreen();
    } else {
        document.exitFullscreen();
    }
});
// ‡∏õ‡∏∏‡πà‡∏° fullscreen
const btn = document.getElementById("fullscreenBtn");

btn.addEventListener("click", () => {
    let elem = document.documentElement;
    if (!document.fullscreenElement) {
        elem.requestFullscreen();
    } else {
        document.exitFullscreen();
    }
});

// ‡πÄ‡∏°‡∏∑‡πà‡∏≠ fullscreen ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™
document.addEventListener("fullscreenchange", () => {
    if (document.fullscreenElement) {
        document.body.classList.add("fullscreen-mode");
    } else {
        document.body.classList.remove("fullscreen-mode");
    }
});
  </script>
</body>
</html>
